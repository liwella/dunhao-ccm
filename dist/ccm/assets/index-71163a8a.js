var w=(u,g,r)=>new Promise((c,o)=>{var f=s=>{try{i(r.next(s))}catch(e){o(e)}},l=s=>{try{i(r.throw(s))}catch(e){o(e)}},i=s=>s.done?c(s.value):Promise.resolve(s.value).then(f,l);i((r=r.apply(u,g)).next())});import{_ as R}from"./AppPage-cd1f2dcc.js";import{_ as $}from"./logo-97732fe7.js";import{s as S,i as B,p as N,q as v,t as h,v as q,o as A,j as D,w as y,x as K,l as a,n as t,k as d,m as b,y as L,z as T,A as V,B as z,_ as C}from"./index-382a7f36.js";import{_ as P}from"./Input-6a9ebbe9.js";import{_ as U}from"./Checkbox-6f953257.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-merged-state-ad7e8082.js";import"./use-locale-b35377f6.js";import"./Suffix-b671d3aa.js";import"./Eye-e6356b95.js";const j="/assets/login_banner-6e96327c.webp",M="/assets/login_bg-ed2739b3.webp",Y={login:u=>S.post("/user/login",u,{noNeedToken:!0})},E={style:{transform:"translateY(25px)"},class:"m-auto max-w-700 min-w-345 f-c-c rounded-10 bg-white bg-opacity-60 p-15 card-shadow","dark:bg-dark":""},F=t("div",{hidden:"","w-380":"","px-20":"","py-35":"","md:block":""},[t("img",{src:j,"w-full":"",alt:"login_banner"})],-1),G={"w-320":"","flex-col":"","px-20":"","py-35":""},H={"f-c-c":"","text-24":"","font-normal":"",color:"#6a6a6a"},J={"mt-30":""},O={"mt-30":""},Q={"mt-20":""},W={"mt-20":""},le={__name:"index",setup(u){const g="Dunhao Admin",r=B(),{query:c}=N(),o=v({name:"",password:""});f();function f(){const e=h.get("loginInfo");e&&(o.value.name=e.name||"",o.value.password=e.password||"")}const l=q("isRemember",!1),i=v(!1);function s(){return w(this,null,function*(){const{name:e,password:n}=o.value;if(!e||!n){$message.warning("请输入用户名和密码");return}try{i.value=!0,$message.loading("正在验证...");const m=yield Y.login({username:e,password:n.toString()});if($message.success("登录成功"),V(m.data.token),l.value?h.set("loginInfo",{name:e,password:n}):h.remove("loginInfo"),yield z(),c.redirect){const _=c.redirect;Reflect.deleteProperty(c,"redirect"),r.push({path:_,query:c})}else r.push("/workbench")}catch(m){console.error(m),$message.removeMessage()}i.value=!1})}return(e,n)=>{const m=$,_=P,x=U,k=C,I=R;return A(),D(I,{"show-footer":!0,"bg-cover":"",style:K({backgroundImage:`url(${a(M)})`})},{default:y(()=>[t("div",E,[F,t("div",G,[t("h5",H,[d(m,{"mr-10":"","text-50":"","color-primary":""}),b(" "+L(a(g)),1)]),t("div",J,[d(_,{value:a(o).name,"onUpdate:value":n[0]||(n[0]=p=>a(o).name=p),autofocus:"",class:"h-50 items-center pl-10 text-16",placeholder:"admin",maxlength:20},null,8,["value"])]),t("div",O,[d(_,{value:a(o).password,"onUpdate:value":n[1]||(n[1]=p=>a(o).password=p),class:"h-50 items-center pl-10 text-16",type:"password","show-password-on":"mousedown",placeholder:"123456",maxlength:20,onKeypress:T(s,["enter"])},null,8,["value","onKeypress"])]),t("div",Q,[d(x,{checked:a(l),label:"记住我","on-update:checked":p=>l.value=p},null,8,["checked","on-update:checked"])]),t("div",W,[d(k,{"h-50":"","w-full":"","rounded-5":"","text-16":"",type:"primary",loading:a(i),onClick:s},{default:y(()=>[b(" 登录 ")]),_:1},8,["loading"])])])])]),_:1},8,["style"])}}};export{le as default};
