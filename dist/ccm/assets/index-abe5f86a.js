var v=(m,g,r)=>new Promise((c,e)=>{var f=o=>{try{i(r.next(o))}catch(l){e(l)}},w=o=>{try{i(r.throw(o))}catch(l){e(l)}},i=o=>o.done?c(o.value):Promise.resolve(o.value).then(f,w);i((r=r.apply(m,g)).next())});import{_ as R}from"./AppPage-87197e9c.js";import{_ as S}from"./logo-684f38c9.js";import{s as q,i as B,p as L,q as k,t as h,v as N,o as A,j as C,w as y,x as D,l as a,n as t,k as u,m as x,y as K,z as T,A as V,B as j,_ as z}from"./index-5837b170.js";import{_ as P}from"./Input-de71e776.js";import{_ as U}from"./Checkbox-df9fc212.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-merged-state-61c7490e.js";import"./use-locale-4062cbc7.js";import"./Suffix-562a013d.js";import"./Eye-0db273d2.js";const M="/assets/login_banner-6e96327c.webp",Y="/assets/login_bg-ed2739b3.webp",E={login:m=>q.post("/user/login",m,{noNeedToken:!0})},F={style:{transform:"translateY(25px)"},class:"m-auto max-w-700 min-w-345 f-c-c rounded-10 bg-white bg-opacity-60 p-15 card-shadow","dark:bg-dark":""},G=t("div",{hidden:"","w-380":"","px-20":"","py-35":"","md:block":""},[t("img",{src:M,"w-full":"",alt:"login_banner"})],-1),H={"w-320":"","flex-col":"","px-20":"","py-35":""},J={"f-c-c":"","text-24":"","font-normal":"",color:"#6a6a6a"},O={"mt-30":""},Q={"mt-30":""},W={"mt-20":"",flex:"","flex-row":"","flex-justify-between":""},X={"mt-20":""},pe={__name:"index",setup(m){const g="Dunhao Admin",r=B(),{query:c}=L(),e=k({name:"",password:""});f();function f(){const n=h.get("loginInfo");n&&(e.value.name=n.name||"",e.value.password=n.password||"")}function w(){return v(this,null,function*(){e.value.name="visitor",e.value.password="qwer1234",yield l()})}const i=N("isRemember",!1),o=k(!1);function l(){return v(this,null,function*(){const{name:n,password:s}=e.value;if(!n||!s){$message.warning("请输入用户名和密码");return}try{o.value=!0,$message.loading("正在验证...");const d=yield E.login({username:n,password:s.toString()});if($message.success("登录成功"),V(d.data.token),i.value?h.set("loginInfo",{name:n,password:s}):h.remove("loginInfo"),yield j(),c.redirect){const _=c.redirect;Reflect.deleteProperty(c,"redirect"),r.push({path:_,query:c})}else r.push("/workbench")}catch(d){console.error(d),$message.removeMessage()}o.value=!1})}return(n,s)=>{const d=S,_=P,I=U,b=z,$=R;return A(),C($,{"show-footer":!0,"bg-cover":"",style:D({backgroundImage:`url(${a(Y)})`})},{default:y(()=>[t("div",F,[G,t("div",H,[t("h5",J,[u(d,{"mr-10":"","text-50":"","color-primary":""}),x(" "+K(a(g)),1)]),t("div",O,[u(_,{value:a(e).name,"onUpdate:value":s[0]||(s[0]=p=>a(e).name=p),autofocus:"",class:"h-50 items-center pl-10 text-16",placeholder:"admin",maxlength:20},null,8,["value"])]),t("div",Q,[u(_,{value:a(e).password,"onUpdate:value":s[1]||(s[1]=p=>a(e).password=p),class:"h-50 items-center pl-10 text-16",type:"password","show-password-on":"mousedown",placeholder:"123456",maxlength:20,onKeypress:T(l,["enter"])},null,8,["value","onKeypress"])]),t("div",W,[t("div",null,[u(I,{checked:a(i),label:"记住我","on-update:checked":p=>i.value=p},null,8,["checked","on-update:checked"])]),t("div",null,[u(b,{type:"primary",text:"true",onClick:s[2]||(s[2]=p=>w())},{default:y(()=>[x("游客登录")]),_:1})])]),t("div",X,[u(b,{"h-50":"","w-full":"","rounded-5":"","text-16":"",type:"primary",loading:a(o),onClick:l},{default:y(()=>[x(" 登录 ")]),_:1},8,["loading"])])])])]),_:1},8,["style"])}}};export{pe as default};
