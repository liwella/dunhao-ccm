import{_ as M}from"./CommonPage-b40383e5.js";import{_ as P}from"./CrudDrawer-9301c7a4.js";import{_ as G}from"./CrudTable-edbc45ef.js";import{_ as H}from"./QueryBarItem-3df38c17.js";import{_ as J}from"./TheIcon-6dac71d9.js";import{s as p,q as c,C as W,o as U,j as w,w as a,n as X,k as t,l as e,_,m as q,D as x,F as Y,h as I}from"./index-382a7f36.js";import{r as N}from"./icon-8555249b.js";import{u as Z,_ as K,a as ee}from"./useCRUD-0fe289c8.js";import{_ as te}from"./Select-e6eef6d1.js";import{_ as le}from"./Input-6a9ebbe9.js";import"./AppPage-cd1f2dcc.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-merged-state-ad7e8082.js";import"./Space-477bb752.js";import"./Checkbox-6f953257.js";import"./Popover-1137b60b.js";import"./get-0f2e694c.js";import"./use-compitable-35473b4d.js";import"./Suffix-b671d3aa.js";import"./Dropdown-a478282e.js";import"./create-d1a5db2f.js";import"./Tooltip-19baa656.js";import"./Empty-1f2b7f9b.js";import"./use-locale-b35377f6.js";import"./Tag-7f23ddcd.js";import"./Eye-e6356b95.js";const f={list:(r={})=>p.post("/sourceConfig/list",r),add:(r={})=>p.post("/sourceConfig/add",r),update:(r={})=>p.post("/sourceConfig/update",r),delete:(r={})=>p.post("/sourceConfig/delete",r)},$e={__name:"index",setup(r){const s=c({});function $(){for(const n in s.value)s.value[n]=null}const v=c(null);W(()=>{v.value.handleSearch()});const y=c([{label:"有效",value:1},{label:"无效",value:0}]),u=c([]);function z(n){n.length?u.value=[...n]:u.value=[]}function D(){u.value.length?(h({ids:u.value}),u.value=[]):$message.error("未选中任何数据")}const R=[{type:"selection",fixed:"left"},{title:"采集源名称",key:"sourceName",width:150,ellipsis:{tooltip:!0}},{title:"视频列表地址",key:"listUrl",width:300,ellipsis:{tooltip:!0}},{title:"视频详情地址",key:"detailUrl",width:300,ellipsis:{tooltip:!0}},{title:"采集源状态",key:"state.description",width:150},{title:"操作",key:"actions",width:200,align:"center",fixed:"right",hideInExcel:!0,render(n){return[I(_,{size:"small",type:"primary",onClick:()=>{V(n,!1)}},{default:()=>"修改",icon:N("material-symbols:edit-outline",{size:14})}),I(_,{size:"small",type:"error",style:"margin-left: 15px;",onClick:()=>{h({ids:[n.id]})}},{default:()=>"删除",icon:N("material-symbols:delete-outline",{size:14})})]}}],{modalVisible:g,modalAction:b,modalTitle:B,modalLoading:F,handleAdd:S,handleDelete:h,handleEdit:V,handleSave:O,modalForm:i,modalFormRef:T}=Z({name:"采集源",initForm:{},doCreate:f.add,doDelete:f.delete,doUpdate:f.update,refresh:()=>{var n;return(n=v.value)==null?void 0:n.handleSearch()}});return(n,l)=>{const k=J,C=te,Q=H,A=G,m=le,d=K,E=ee,j=P,L=M;return U(),w(L,{"show-footer":"",title:"采集源管理"},{action:a(()=>[X("div",null,[t(e(_),{type:"primary",class:"ml-16",onClick:e(S)},{default:a(()=>[t(k,{icon:"material-symbols:add",size:18,class:"mr-5"}),q(" 新增采集源 ")]),_:1},8,["onClick"]),t(e(_),{type:"error",class:"ml-16",onClick:D},{default:a(()=>[t(k,{icon:"material-symbols:delete-outline",size:18,class:"mr-5"}),q(" 删除采集源 ")]),_:1})])]),default:a(()=>[t(A,{ref_key:"$table",ref:v,"query-items":e(s),"onUpdate:queryItems":l[1]||(l[1]=o=>x(s)?s.value=o:null),"is-pagination":!1,"scroll-x":1200,columns:R,"get-data":e(f).list,onOnChecked:z,onResetQueryItems:$},{queryBar:a(()=>[t(Q,{label:"采集源状态","label-width":80,"content-width":150},{default:a(()=>[t(C,{value:e(s).state,"onUpdate:value":l[0]||(l[0]=o=>e(s).state=o),placeholder:"请选择采集源状态",clearable:"",options:e(y)},null,8,["value","options"])]),_:1})]),_:1},8,["query-items","get-data"]),t(j,{visible:e(g),"onUpdate:visible":l[7]||(l[7]=o=>x(g)?g.value=o:null),title:e(B),loading:e(F),"show-footer":e(b)!=="view",onOnSave:e(O)},{default:a(()=>[t(E,{ref_key:"modalFormRef",ref:T,model:e(i),"label-placement":"left","label-align":"left","label-width":120,disabled:e(b)==="view"},{default:a(()=>[t(d,{label:"采集源id",path:"id"},{default:a(()=>[t(m,{value:e(i).id,"onUpdate:value":l[2]||(l[2]=o=>e(i).id=o),disabled:""},null,8,["value"])]),_:1}),t(d,{label:"采集源名称",path:"sourceName",rule:{required:!0,message:"请输入采集源名称",trigger:"blur"}},{default:a(()=>[t(m,{value:e(i).sourceName,"onUpdate:value":l[3]||(l[3]=o=>e(i).sourceName=o),placeholder:"请输入采集源名称"},null,8,["value"])]),_:1}),t(d,{label:"视频列表地址",path:"listUrl",rule:{required:!0,message:"请输入视频列表地址",trigger:"blur"}},{default:a(()=>[t(m,{value:e(i).listUrl,"onUpdate:value":l[4]||(l[4]=o=>e(i).listUrl=o),placeholder:"请输入视频列表地址"},null,8,["value"])]),_:1}),t(d,{label:"视频详情地址",path:"detailUrl",rule:{required:!0,message:"请输入视频详情地址",trigger:"blur"}},{default:a(()=>[t(m,{value:e(i).detailUrl,"onUpdate:value":l[5]||(l[5]=o=>e(i).detailUrl=o),placeholder:"请输入视频详情地址"},null,8,["value"])]),_:1}),e(b)==="edit"?(U(),w(d,{key:0,label:"采集源状态",path:"state.value",rule:{required:!0,message:"请选择采集源状态",trigger:"change",type:"number"}},{default:a(()=>[t(C,{value:e(i).state.value,"onUpdate:value":l[6]||(l[6]=o=>e(i).state.value=o),options:e(y),placeholder:"请选择采集源状态"},null,8,["value","options"])]),_:1})):Y("",!0)]),_:1},8,["model","disabled"])]),_:1},8,["visible","title","loading","show-footer","onOnSave"])]),_:1})}}};export{$e as default};
