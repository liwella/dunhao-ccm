import{d as j,bJ as te,C as ne,ah as ie,ai as le,e as w,q as _,U as oe,aV as Z,X as H,h as p,bj as se,bz as K,c as re,a as k,Z as ae,u as ce,b as q,bP as ue,O as de,bQ as fe,f as X,g as me,N as he}from"./index-5837b170.js";import{c as ve,a as O,b as ge}from"./get-803e7bb1.js";import{u as pe}from"./use-locale-4062cbc7.js";function Y(n){return n&-n}class ye{constructor(i,l){this.l=i,this.min=l;const a=new Array(i+1);for(let r=0;r<i+1;++r)a[r]=0;this.ft=a}add(i,l){if(l===0)return;const{l:a,ft:r}=this;for(i+=1;i<=a;)r[i]+=l,i+=Y(i)}get(i){return this.sum(i+1)-this.sum(i)}sum(i){if(i===void 0&&(i=this.l),i<=0)return 0;const{ft:l,min:a,l:r}=this;if(i>r)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let o=i*a;for(;i>0;)o+=l[i],i-=Y(i);return o}getBound(i){let l=0,a=this.l;for(;a>l;){const r=Math.floor((l+a)/2),o=this.sum(r);if(o>i){a=r;continue}else if(o<i){if(l===r)return this.sum(l+1)<=i?l+1:r;l=r}else return r}return l}}let B;function be(){return B===void 0&&("matchMedia"in window?B=window.matchMedia("(pointer:coarse)").matches:B=!1),B}let $;function U(){return $===void 0&&($="chrome"in window?window.devicePixelRatio:1),$}const we=O(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[O("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[O("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),Ie=j({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(n){const i=te();we.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:ve,ssr:i}),ne(()=>{const{defaultScrollIndex:e,defaultScrollKey:t}=n;e!=null?T({index:e}):t!=null&&T({key:t})});let l=!1,a=!1;ie(()=>{if(l=!1,!a){a=!0;return}T({top:m.value,left:c})}),le(()=>{l=!0,a||(a=!0)});const r=w(()=>{const e=new Map,{keyField:t}=n;return n.items.forEach((s,d)=>{e.set(s[t],d)}),e}),o=_(null),x=_(void 0),y=new Map,b=w(()=>{const{items:e,itemSize:t,keyField:s}=n,d=new ye(e.length,t);return e.forEach((f,h)=>{const u=f[s],g=y.get(u);g!==void 0&&d.add(h,g)}),d}),v=_(0);let c=0;const m=_(0),z=oe(()=>Math.max(b.value.getBound(m.value-Z(n.paddingTop))-1,0)),M=w(()=>{const{value:e}=x;if(e===void 0)return[];const{items:t,itemSize:s}=n,d=z.value,f=Math.min(d+Math.ceil(e/s+1),t.length-1),h=[];for(let u=d;u<=f;++u)h.push(t[u]);return h}),T=(e,t)=>{if(typeof e=="number"){E(e,t,"auto");return}const{left:s,top:d,index:f,key:h,position:u,behavior:g,debounce:S=!0}=e;if(s!==void 0||d!==void 0)E(s,d,g);else if(f!==void 0)A(f,g,S);else if(h!==void 0){const N=r.value.get(h);N!==void 0&&A(N,g,S)}else u==="bottom"?E(0,Number.MAX_SAFE_INTEGER,g):u==="top"&&E(0,0,g)};let C,I=null;function A(e,t,s){const{value:d}=b,f=d.sum(e)+Z(n.paddingTop);if(!s)o.value.scrollTo({left:0,top:f,behavior:t});else{C=e,I!==null&&window.clearTimeout(I),I=window.setTimeout(()=>{C=void 0,I=null},16);const{scrollTop:h,offsetHeight:u}=o.value;if(f>h){const g=d.get(e);f+g<=h+u||o.value.scrollTo({left:0,top:f+g-u,behavior:t})}else o.value.scrollTo({left:0,top:f,behavior:t})}}function E(e,t,s){o.value.scrollTo({left:e,top:t,behavior:s})}function G(e,t){var s,d,f;if(l||n.ignoreItemResize||W(t.target))return;const{value:h}=b,u=r.value.get(e),g=h.get(u),S=(f=(d=(s=t.borderBoxSize)===null||s===void 0?void 0:s[0])===null||d===void 0?void 0:d.blockSize)!==null&&f!==void 0?f:t.contentRect.height;if(S===g)return;S-n.itemSize===0?y.delete(e):y.set(e,S-n.itemSize);const L=S-g;if(L===0)return;h.add(u,L);const R=o.value;if(R!=null){if(C===void 0){const F=h.sum(u);R.scrollTop>F&&R.scrollBy(0,L)}else if(u<C)R.scrollBy(0,L);else if(u===C){const F=h.sum(u);S+F>R.scrollTop+R.offsetHeight&&R.scrollBy(0,L)}P()}v.value++}const D=!be();let V=!1;function J(e){var t;(t=n.onScroll)===null||t===void 0||t.call(n,e),(!D||!V)&&P()}function Q(e){var t;if((t=n.onWheel)===null||t===void 0||t.call(n,e),D){const s=o.value;if(s!=null){if(e.deltaX===0&&(s.scrollTop===0&&e.deltaY<=0||s.scrollTop+s.offsetHeight>=s.scrollHeight&&e.deltaY>=0))return;e.preventDefault(),s.scrollTop+=e.deltaY/U(),s.scrollLeft+=e.deltaX/U(),P(),V=!0,ge(()=>{V=!1})}}}function ee(e){if(l||W(e.target)||e.contentRect.height===x.value)return;x.value=e.contentRect.height;const{onResize:t}=n;t!==void 0&&t(e)}function P(){const{value:e}=o;e!=null&&(m.value=e.scrollTop,c=e.scrollLeft)}function W(e){let t=e;for(;t!==null;){if(t.style.display==="none")return!0;t=t.parentElement}return!1}return{listHeight:x,listStyle:{overflow:"auto"},keyToIndex:r,itemsStyle:w(()=>{const{itemResizable:e}=n,t=H(b.value.sum());return v.value,[n.itemsStyle,{boxSizing:"content-box",height:e?"":t,minHeight:e?t:"",paddingTop:H(n.paddingTop),paddingBottom:H(n.paddingBottom)}]}),visibleItemsStyle:w(()=>(v.value,{transform:`translateY(${H(b.value.sum(z.value))})`})),viewportItems:M,listElRef:o,itemsElRef:_(null),scrollTo:T,handleListResize:ee,handleListScroll:J,handleListWheel:Q,handleItemResize:G}},render(){const{itemResizable:n,keyField:i,keyToIndex:l,visibleItemsTag:a}=this;return p(K,{onResize:this.handleListResize},{default:()=>{var r,o;return p("div",se(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?p("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[p(a,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(x=>{const y=x[i],b=l.get(y),v=this.$slots.default({item:x,index:b})[0];return n?p(K,{key:y,onResize:c=>this.handleItemResize(y,c)},{default:()=>v}):(v.key=y,v)})})]):(o=(r=this.$slots).empty)===null||o===void 0?void 0:o.call(r)])}})}}),xe=j({name:"Empty",render(){return p("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),p("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),ze=re("empty",`
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--n-font-size);
`,[k("icon",`
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 line-height: var(--n-icon-size);
 color: var(--n-icon-color);
 transition:
 color .3s var(--n-bezier);
 `,[ae("+",[k("description",`
 margin-top: 8px;
 `)])]),k("description",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),k("extra",`
 text-align: center;
 transition: color .3s var(--n-bezier);
 margin-top: 12px;
 color: var(--n-extra-text-color);
 `)]),Se=Object.assign(Object.assign({},q.props),{description:String,showDescription:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function}),Le=j({name:"Empty",props:Se,setup(n){const{mergedClsPrefixRef:i,inlineThemeDisabled:l}=ce(n),a=q("Empty","-empty",ze,ue,n,i),{localeRef:r}=pe("Empty"),o=de(fe,null),x=w(()=>{var c,m,z;return(c=n.description)!==null&&c!==void 0?c:(z=(m=o==null?void 0:o.mergedComponentPropsRef.value)===null||m===void 0?void 0:m.Empty)===null||z===void 0?void 0:z.description}),y=w(()=>{var c,m;return((m=(c=o==null?void 0:o.mergedComponentPropsRef.value)===null||c===void 0?void 0:c.Empty)===null||m===void 0?void 0:m.renderIcon)||(()=>p(xe,null))}),b=w(()=>{const{size:c}=n,{common:{cubicBezierEaseInOut:m},self:{[X("iconSize",c)]:z,[X("fontSize",c)]:M,textColor:T,iconColor:C,extraTextColor:I}}=a.value;return{"--n-icon-size":z,"--n-font-size":M,"--n-bezier":m,"--n-text-color":T,"--n-icon-color":C,"--n-extra-text-color":I}}),v=l?me("empty",w(()=>{let c="";const{size:m}=n;return c+=m[0],c}),b,n):void 0;return{mergedClsPrefix:i,mergedRenderIcon:y,localizedDescription:w(()=>x.value||r.value.description),cssVars:l?void 0:b,themeClass:v==null?void 0:v.themeClass,onRender:v==null?void 0:v.onRender}},render(){const{$slots:n,mergedClsPrefix:i,onRender:l}=this;return l==null||l(),p("div",{class:[`${i}-empty`,this.themeClass],style:this.cssVars},this.showIcon?p("div",{class:`${i}-empty__icon`},n.icon?n.icon():p(he,{clsPrefix:i},{default:this.mergedRenderIcon})):null,this.showDescription?p("div",{class:`${i}-empty__description`},n.default?n.default():this.localizedDescription):null,n.extra?p("div",{class:`${i}-empty__extra`},n.extra()):null)}});export{Ie as V,Le as _};
