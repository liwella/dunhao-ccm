import{_ as M}from"./CommonPage-df3cba64.js";import{_ as P}from"./CrudDrawer-d53b1c79.js";import{_ as G}from"./CrudTable-2986cf73.js";import{_ as H}from"./QueryBarItem-fca409cf.js";import{_ as J}from"./TheIcon-2507ec8e.js";import{s as p,q as c,C as W,o as U,j as w,w as a,n as X,k as t,l as e,_,m as q,D as x,F as Y,h as I}from"./index-5837b170.js";import{r as N}from"./icon-17ab6bf1.js";import{u as Z,_ as K,a as ee}from"./useCRUD-f6f94421.js";import{_ as te}from"./Select-a522e322.js";import{_ as le}from"./Input-de71e776.js";import"./AppPage-87197e9c.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-merged-state-61c7490e.js";import"./Space-fc43479b.js";import"./Checkbox-df9fc212.js";import"./Popover-09c0b6af.js";import"./get-803e7bb1.js";import"./use-compitable-8b432e4c.js";import"./Suffix-562a013d.js";import"./Dropdown-5a734c78.js";import"./create-d1a5db2f.js";import"./Tooltip-aaf5ff4a.js";import"./Empty-8e6e6efa.js";import"./use-locale-4062cbc7.js";import"./Tag-cc294052.js";import"./Eye-0db273d2.js";const f={list:(n={})=>p.post("/sourceConfig/list",n),add:(n={})=>p.post("/sourceConfig/add",n),update:(n={})=>p.post("/sourceConfig/update",n),delete:(n={})=>p.post("/sourceConfig/delete",n)},$e={__name:"index",setup(n){const s=c({});function $(){for(const r in s.value)s.value[r]=null}const v=c(null);W(()=>{v.value.handleSearch()});const b=c([{label:"有效",value:1},{label:"无效",value:0}]),d=c([]);function z(r){r.length?d.value=[...r]:d.value=[]}function D(){d.value.length?(h({ids:d.value}),d.value=[]):$message.error("未选中任何数据")}const R=[{type:"selection",fixed:"left"},{title:"采集源名称",key:"sourceName",width:150,ellipsis:{tooltip:!0}},{title:"视频列表地址",key:"listUrl",width:300,ellipsis:{tooltip:!0}},{title:"视频详情地址",key:"detailUrl",width:300,ellipsis:{tooltip:!0}},{title:"解析播放器",key:"player",width:200,ellipsis:{tooltip:!0}},{title:"采集源状态",key:"state.description",width:150},{title:"操作",key:"actions",width:200,align:"center",fixed:"right",hideInExcel:!0,render(r){return[I(_,{size:"small",type:"primary",onClick:()=>{V(r,!1)}},{default:()=>"修改",icon:N("material-symbols:edit-outline",{size:14})}),I(_,{size:"small",type:"error",style:"margin-left: 15px;",onClick:()=>{h({ids:[r.id]})}},{default:()=>"删除",icon:N("material-symbols:delete-outline",{size:14})})]}}],{modalVisible:g,modalAction:y,modalTitle:B,modalLoading:F,handleAdd:S,handleDelete:h,handleEdit:V,handleSave:O,modalForm:i,modalFormRef:T}=Z({name:"采集源",initForm:{},doCreate:f.add,doDelete:f.delete,doUpdate:f.update,refresh:()=>{var r;return(r=v.value)==null?void 0:r.handleSearch()}});return(r,l)=>{const k=J,C=te,Q=H,A=G,m=le,u=K,E=ee,j=P,L=M;return U(),w(L,{"show-footer":"",title:"采集源管理"},{action:a(()=>[X("div",null,[t(e(_),{type:"primary",class:"ml-16",onClick:e(S)},{default:a(()=>[t(k,{icon:"material-symbols:add",size:18,class:"mr-5"}),q(" 新增采集源 ")]),_:1},8,["onClick"]),t(e(_),{type:"error",class:"ml-16",onClick:D},{default:a(()=>[t(k,{icon:"material-symbols:delete-outline",size:18,class:"mr-5"}),q(" 删除采集源 ")]),_:1})])]),default:a(()=>[t(A,{ref_key:"$table",ref:v,"query-items":e(s),"onUpdate:queryItems":l[1]||(l[1]=o=>x(s)?s.value=o:null),"is-pagination":!1,"scroll-x":1200,columns:R,"get-data":e(f).list,onOnChecked:z,onResetQueryItems:$},{queryBar:a(()=>[t(Q,{label:"采集源状态","label-width":80,"content-width":150},{default:a(()=>[t(C,{value:e(s).state,"onUpdate:value":l[0]||(l[0]=o=>e(s).state=o),placeholder:"请选择采集源状态",clearable:"",options:e(b)},null,8,["value","options"])]),_:1})]),_:1},8,["query-items","get-data"]),t(j,{visible:e(g),"onUpdate:visible":l[8]||(l[8]=o=>x(g)?g.value=o:null),title:e(B),loading:e(F),"show-footer":e(y)!=="view",onOnSave:e(O)},{default:a(()=>[t(E,{ref_key:"modalFormRef",ref:T,model:e(i),"label-placement":"left","label-align":"left","label-width":120,disabled:e(y)==="view"},{default:a(()=>[t(u,{label:"采集源id",path:"id"},{default:a(()=>[t(m,{value:e(i).id,"onUpdate:value":l[2]||(l[2]=o=>e(i).id=o),disabled:""},null,8,["value"])]),_:1}),t(u,{label:"采集源名称",path:"sourceName",rule:{required:!0,message:"请输入采集源名称",trigger:"blur"}},{default:a(()=>[t(m,{value:e(i).sourceName,"onUpdate:value":l[3]||(l[3]=o=>e(i).sourceName=o),placeholder:"请输入采集源名称"},null,8,["value"])]),_:1}),t(u,{label:"视频列表地址",path:"listUrl",rule:{required:!0,message:"请输入视频列表地址",trigger:"blur"}},{default:a(()=>[t(m,{value:e(i).listUrl,"onUpdate:value":l[4]||(l[4]=o=>e(i).listUrl=o),placeholder:"请输入视频列表地址"},null,8,["value"])]),_:1}),t(u,{label:"视频详情地址",path:"detailUrl",rule:{required:!0,message:"请输入视频详情地址",trigger:"blur"}},{default:a(()=>[t(m,{value:e(i).detailUrl,"onUpdate:value":l[5]||(l[5]=o=>e(i).detailUrl=o),placeholder:"请输入视频详情地址"},null,8,["value"])]),_:1}),t(u,{label:"视频解析器",path:"player"},{default:a(()=>[t(m,{value:e(i).player,"onUpdate:value":l[6]||(l[6]=o=>e(i).player=o),placeholder:"请输入视频解析器地址"},null,8,["value"])]),_:1}),e(y)==="edit"?(U(),w(u,{key:0,label:"采集源状态",path:"state.value",rule:{required:!0,message:"请选择采集源状态",trigger:"change",type:"number"}},{default:a(()=>[t(C,{value:e(i).state.value,"onUpdate:value":l[7]||(l[7]=o=>e(i).state.value=o),options:e(b),placeholder:"请选择采集源状态"},null,8,["value","options"])]),_:1})):Y("",!0)]),_:1},8,["model","disabled"])]),_:1},8,["visible","title","loading","show-footer","onOnSave"])]),_:1})}}};export{$e as default};
