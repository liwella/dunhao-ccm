import{_ as Q,a as j}from"./CrudTable-d5dbb5b5.js";import{u as J,_ as L,a as P,b as Z}from"./useCRUD-bc17d7e5.js";import{a as G}from"./TheIcon-eb82caa9.js";import{s as _,q as y,Z as H,o as W,j as X,w as o,n as I,k as t,m as M,l as e,_ as p,aJ as x,h as b}from"./index-967a368f.js";import{a as h}from"./icon-8918c9e9.js";import{_ as Y}from"./Checkbox-55f9ae12.js";import{_ as K}from"./Select-589412ca.js";import"./AppPage-2347a5b8.js";import"./_plugin-vue_export-helper-b1890646.js";import"./Space-9d5a9065.js";import"./Tag-2664c78d.js";import"./create-0094aa60.js";import"./use-compitable-f97a7f2f.js";import"./Suffix-5fa70e3c.js";import"./Empty-f250f8a4.js";const c={listMenu:()=>_.post("/menu/listMenu"),addMenu:(u={})=>_.post("/menu/addMenu",u),updateMenu:(u={})=>_.post("/menu/updateMenu",u),deleteMenu:(u={})=>_.post("/menu/deleteMenu",u)},ee=I("div",null,null,-1),ve={__name:"index",setup(u){const U=[{label:"菜单",value:1},{label:"目录",value:2},{label:"权限",value:3}],f=y(null);H(()=>{f.value.handleSearch()});const d=y({});function q(){for(const i in d.value)d.value[i]=null}const m=y([]);function z(i){i.length?m.value=[...i]:m.value=[]}function $(){m.value.length?(w({ids:m.value}),m.value=[]):$message.error("未选中任何数据")}const N=[{type:"selection",fixed:"left"},{title:"菜单/权限名称",key:"menuName",width:120,ellipsis:{tooltip:!0}},{title:"访问路径",key:"url",width:120,ellipsis:{tooltip:!0}},{title:"权限编码",key:"permission",width:100,ellipsis:{tooltip:!0}},{title:"类型",key:"type.description",width:80},{title:"图标",key:"icon",width:120,ellipsis:{tooltip:!0}},{title:"操作",key:"actions",width:200,align:"center",fixed:"right",hideInExcel:!0,render(i){const l=[b(p,{size:"small",type:"primary",style:"margin-right: 15px;",onClick:()=>{B(i,!1)}},{default:()=>"编辑",icon:h("material-symbols:edit-outline",{size:14})}),b(p,{size:"small",type:"error",onClick:()=>{w({ids:[i.id]})}},{default:()=>"删除",icon:h("material-symbols:delete-outline",{size:14})})];return i.level!==2&&l.unshift(b(p,{size:"small",type:"primary",style:"margin-right: 15px",onClick:()=>{k({parentId:i.id})}},{default:()=>"新增",icon:h("material-symbols:add-notes-outline-rounded",{size:14})})),l}}],{modalVisible:v,modalTitle:R,modalLoading:S,modalAction:g,handleSave:D,handleAdd:k,handleDelete:w,handleEdit:B,modalForm:n,modalFormRef:F}=J({name:"权限菜单",initForm:{type:{}},doCreate:c.addMenu,doDelete:c.deleteMenu,doUpdate:c.updateMenu,doSearch:null,refresh:()=>{var i;return(i=f.value)==null?void 0:i.handleSearch()}});return(i,l)=>{const C=G,O=j,r=Y,s=L,T=K,V=P,A=Z,E=Q;return W(),X(E,{"show-footer":"",title:"权限菜单管理"},{action:o(()=>[I("div",null,[t(e(p),{type:"primary",onClick:e(k)},{default:o(()=>[t(C,{icon:"material-symbols:add",size:18,class:"mr-5"}),M(" 新增 ")]),_:1},8,["onClick"]),t(e(p),{type:"error",class:"ml-16",onClick:$},{default:o(()=>[t(C,{icon:"material-symbols:delete-outline",size:18,class:"mr-5"}),M(" 批量删除 ")]),_:1})])]),default:o(()=>[t(O,{ref_key:"$table",ref:f,"query-items":e(d),"onUpdate:queryItems":l[0]||(l[0]=a=>x(d)?d.value=a:null),"row-key":"id","scroll-x":1200,columns:N,"is-pagination":!1,"get-data":e(c).listMenu,onOnChecked:z,onResetQueryItems:q},{queryBar:o(()=>[ee]),_:1},8,["query-items","get-data"]),t(A,{visible:e(v),"onUpdate:visible":l[8]||(l[8]=a=>x(v)?v.value=a:null),title:e(R),loading:e(S),"show-footer":e(g)!=="view",onOnSave:e(D)},{default:o(()=>[t(V,{ref_key:"modalFormRef",ref:F,model:e(n),"label-placement":"left","label-align":"left","label-width":80,disabled:e(g)==="view"},{default:o(()=>[t(s,{label:"菜单/权限id",path:"id","label-width":100},{default:o(()=>[t(r,{value:e(n).id,"onUpdate:value":l[1]||(l[1]=a=>e(n).id=a),disabled:""},null,8,["value"])]),_:1}),t(s,{label:"菜单/权限名称",path:"menuName","label-width":120,rule:{required:!0,message:"请输入菜单/权限名称",trigger:"blur"}},{default:o(()=>[t(r,{value:e(n).menuName,"onUpdate:value":l[2]||(l[2]=a=>e(n).menuName=a),placeholder:"请输入菜单/权限名称"},null,8,["value"])]),_:1}),t(s,{label:"访问路径",path:"url"},{default:o(()=>[t(r,{value:e(n).url,"onUpdate:value":l[3]||(l[3]=a=>e(n).url=a),placeholder:"请输入访问路径"},null,8,["value"])]),_:1}),t(s,{label:"权限编码",path:"permission"},{default:o(()=>[t(r,{value:e(n).permission,"onUpdate:value":l[4]||(l[4]=a=>e(n).permission=a),placeholder:"请输入权限编码"},null,8,["value"])]),_:1}),t(s,{label:"类型",path:"type.value",rule:{required:!0,message:"请选择类型",trigger:"change",type:"number"}},{default:o(()=>[t(T,{value:e(n).type.value,"onUpdate:value":l[5]||(l[5]=a=>e(n).type.value=a),options:U,placeholder:"请选择"},null,8,["value"])]),_:1}),t(s,{label:"图标",path:"icon"},{default:o(()=>[t(r,{value:e(n).icon,"onUpdate:value":l[6]||(l[6]=a=>e(n).icon=a),placeholder:"请输入图标路径"},null,8,["value"])]),_:1}),t(s,{label:"父菜单id",path:"parentId"},{default:o(()=>[t(r,{value:e(n).parentId,"onUpdate:value":l[7]||(l[7]=a=>e(n).parentId=a),disabled:""},null,8,["value"])]),_:1})]),_:1},8,["model","disabled"])]),_:1},8,["visible","title","loading","show-footer","onOnSave"])]),_:1})}}};export{ve as default};
