import{_ as J,a as L,b as M}from"./QueryBarItem-77be0521.js";import{u as Z,_ as G,a as H,b as W}from"./useCRUD-9f6ab303.js";import{a as X}from"./TheIcon-e8dffd8c.js";import{s as p,q as c,Z as Y,o as U,j as w,w as o,n as K,k as t,m as q,l as e,_,aJ as x,aP as ee,h as $}from"./index-17513144.js";import{a as I}from"./icon-128fc7c7.js";import{_ as te}from"./Select-6813fca3.js";import{_ as le}from"./Checkbox-f2e92635.js";import"./AppPage-1db47f32.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-merged-state-0c591b30.js";import"./Space-5ba083ab.js";import"./Tag-91cdf206.js";import"./create-a434528c.js";import"./use-compitable-181cacb5.js";import"./Suffix-c643866b.js";import"./Empty-b9793baf.js";const f={list:(i={})=>p.post("/sourceConfig/list",i),add:(i={})=>p.post("/sourceConfig/add",i),update:(i={})=>p.post("/sourceConfig/update",i),delete:(i={})=>p.post("/sourceConfig/delete",i)},ye={__name:"index",setup(i){const r=c({});function N(){for(const s in r.value)r.value[s]=null}const v=c(null);Y(()=>{v.value.handleSearch()});const y=c([{label:"有效",value:1},{label:"无效",value:0}]),u=c([]);function z(s){s.length?u.value=[...s]:u.value=[]}function R(){u.value.length?(h(u.value),u.value=[]):$message.error("未选中任何数据")}const B=[{type:"selection",fixed:"left"},{title:"采集源名称",key:"sourceName",width:150,ellipsis:{tooltip:!0}},{title:"视频列表地址",key:"listUrl",width:300,ellipsis:{tooltip:!0}},{title:"视频详情地址",key:"detailUrl",width:300,ellipsis:{tooltip:!0}},{title:"采集源状态",key:"state.description",width:150},{title:"操作",key:"actions",width:200,align:"center",fixed:"right",hideInExcel:!0,render(s){return[$(_,{size:"small",type:"primary",onClick:()=>{F(s,!1)}},{default:()=>"修改",icon:I("material-symbols:edit-outline",{size:14})}),$(_,{size:"small",type:"error",style:"margin-left: 15px;",onClick:()=>{h([s.id])}},{default:()=>"删除",icon:I("material-symbols:delete-outline",{size:14})})]}}],{modalVisible:g,modalAction:b,modalTitle:D,modalLoading:S,handleAdd:V,handleDelete:h,handleEdit:F,handleSave:O,modalForm:n,modalFormRef:T}=Z({name:"采集源",initForm:{},doCreate:f.add,doDelete:f.delete,doUpdate:f.update,refresh:()=>{var s;return(s=v.value)==null?void 0:s.handleSearch()}});return(s,l)=>{const k=X,C=te,Q=L,A=M,m=le,d=G,E=H,P=W,j=J;return U(),w(j,{"show-footer":"",title:"采集源管理"},{action:o(()=>[K("div",null,[t(e(_),{type:"primary",class:"ml-16",onClick:e(V)},{default:o(()=>[t(k,{icon:"material-symbols:add",size:18,class:"mr-5"}),q(" 新增采集源 ")]),_:1},8,["onClick"]),t(e(_),{type:"error",class:"ml-16",onClick:R},{default:o(()=>[t(k,{icon:"material-symbols:delete-outline",size:18,class:"mr-5"}),q(" 删除采集源 ")]),_:1})])]),default:o(()=>[t(A,{ref_key:"$table",ref:v,"query-items":e(r),"onUpdate:queryItems":l[1]||(l[1]=a=>x(r)?r.value=a:null),"is-pagination":!1,"scroll-x":1200,columns:B,"get-data":e(f).list,onOnChecked:z,onResetQueryItems:N},{queryBar:o(()=>[t(Q,{label:"采集源状态","label-width":80,"content-width":150},{default:o(()=>[t(C,{value:e(r).state,"onUpdate:value":l[0]||(l[0]=a=>e(r).state=a),placeholder:"请选择采集源状态",clearable:"",options:e(y)},null,8,["value","options"])]),_:1})]),_:1},8,["query-items","get-data"]),t(P,{visible:e(g),"onUpdate:visible":l[7]||(l[7]=a=>x(g)?g.value=a:null),title:e(D),loading:e(S),"show-footer":e(b)!=="view",onOnSave:e(O)},{default:o(()=>[t(E,{ref_key:"modalFormRef",ref:T,model:e(n),"label-placement":"left","label-align":"left","label-width":120,disabled:e(b)==="view"},{default:o(()=>[t(d,{label:"采集源id",path:"id"},{default:o(()=>[t(m,{value:e(n).id,"onUpdate:value":l[2]||(l[2]=a=>e(n).id=a),disabled:""},null,8,["value"])]),_:1}),t(d,{label:"采集源名称",path:"sourceName",rule:{required:!0,message:"请输入采集源名称",trigger:"blur"}},{default:o(()=>[t(m,{value:e(n).sourceName,"onUpdate:value":l[3]||(l[3]=a=>e(n).sourceName=a),placeholder:"请输入采集源名称"},null,8,["value"])]),_:1}),t(d,{label:"视频列表地址",path:"listUrl",rule:{required:!0,message:"请输入视频列表地址",trigger:"blur"}},{default:o(()=>[t(m,{value:e(n).listUrl,"onUpdate:value":l[4]||(l[4]=a=>e(n).listUrl=a),placeholder:"请输入视频列表地址"},null,8,["value"])]),_:1}),t(d,{label:"视频详情地址",path:"detailUrl",rule:{required:!0,message:"请输入视频详情地址",trigger:"blur"}},{default:o(()=>[t(m,{value:e(n).detailUrl,"onUpdate:value":l[5]||(l[5]=a=>e(n).detailUrl=a),placeholder:"请输入视频详情地址"},null,8,["value"])]),_:1}),e(b)==="edit"?(U(),w(d,{key:0,label:"采集源状态",path:"state.value",rule:{required:!0,message:"请选择采集源状态",trigger:"change",type:"number"}},{default:o(()=>[t(C,{value:e(n).state.value,"onUpdate:value":l[6]||(l[6]=a=>e(n).state.value=a),options:e(y),placeholder:"请选择采集源状态"},null,8,["value","options"])]),_:1})):ee("",!0)]),_:1},8,["model","disabled"])]),_:1},8,["visible","title","loading","show-footer","onOnSave"])]),_:1})}}};export{ye as default};
