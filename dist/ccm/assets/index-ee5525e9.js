var ue=(e,r,p)=>new Promise((u,f)=>{var v=_=>{try{C(p.next(_))}catch(k){f(k)}},b=_=>{try{C(p.throw(_))}catch(k){f(k)}},C=_=>_.done?u(_.value):Promise.resolve(_.value).then(v,b);C((p=p.apply(e,r)).next())});import{_ as et,a as tt,b as nt}from"./QueryBarItem-77be0521.js";import{u as at,_ as lt,a as it,b as ot}from"./useCRUD-9f6ab303.js";import{a as rt}from"./TheIcon-e8dffd8c.js";import{d as Ie,h as o,aa as st,V as Ee,b4 as ut,b5 as dt,b6 as ct,b7 as ft,M as we,c as ye,u as je,b as xe,b8 as He,q as R,L as Ke,ai as Z,J as mt,$ as ht,e as be,b9 as pt,aw as j,ba as $e,a2 as Ne,N as Fe,bb as De,af as H,K as bt,a as m,b0 as Me,Q as L,al as Oe,f as ee,a$ as Te,bc as E,g as gt,Y as Ce,aY as vt,aZ as wt,s as te,Z as yt,o as Pe,j as Ue,w as B,n as xt,k as x,m as _t,l as d,_ as ve,aJ as Re,aP as kt}from"./index-17513144.js";import{a as Se}from"./icon-128fc7c7.js";import{_ as Tt}from"./DatePicker-1c711f5c.js";import{u as qe}from"./use-merged-state-0c591b30.js";import{u as Ct}from"./Suffix-c643866b.js";import{_ as Rt}from"./Checkbox-f2e92635.js";import{A as St}from"./Add-b4615fc3.js";import{_ as Vt}from"./Select-6813fca3.js";import"./AppPage-1db47f32.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Space-5ba083ab.js";import"./Tag-91cdf206.js";import"./create-a434528c.js";import"./use-compitable-181cacb5.js";import"./Empty-b9793baf.js";const Bt=Ie({name:"Remove",render(){return o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},o("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}}),It=e=>{const{textColorDisabled:r}=e;return{iconColorDisabled:r}},$t=st({name:"InputNumber",common:Ee,peers:{Button:ut,Input:dt},self:It}),Nt=$t,Ft=e=>{const{primaryColor:r,opacityDisabled:p,borderRadius:u,textColor3:f}=e,v="rgba(0, 0, 0, .14)";return Object.assign(Object.assign({},ct),{iconColor:f,textColor:"white",loadingColor:r,opacityDisabled:p,railColor:v,railColorActive:r,buttonBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",buttonColor:"#FFF",railBorderRadiusSmall:u,railBorderRadiusMedium:u,railBorderRadiusLarge:u,buttonBorderRadiusSmall:u,buttonBorderRadiusMedium:u,buttonBorderRadiusLarge:u,boxShadowFocus:`0 0 0 2px ${ft(r,{alpha:.2})}`})},Dt={name:"Switch",common:Ee,self:Ft},Mt=Dt;function Ot(e){return e==null||typeof e=="string"&&e.trim()===""?null:Number(e)}function Pt(e){return e.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(e)||/^\.\d+$/.test(e))}function Ve(e){return e==null?!0:!Number.isNaN(e)}function ze(e,r){return e==null?"":r===void 0?String(e):e.toFixed(r)}function Be(e){if(e===null)return null;if(typeof e=="number")return e;{const r=Number(e);return Number.isNaN(r)?null:r}}const Ut=we([ye("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),ye("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),Ae=800,Le=100,zt=Object.assign(Object.assign({},xe.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),At=Ie({name:"InputNumber",props:zt,setup(e){const{mergedBorderedRef:r,mergedClsPrefixRef:p,mergedRtlRef:u}=je(e),f=xe("InputNumber","-input-number",Ut,Nt,e,p),{localeRef:v}=Ct("InputNumber"),b=He(e),{mergedSizeRef:C,mergedDisabledRef:_,mergedStatusRef:k}=b,T=R(null),I=R(null),h=R(null),S=R(e.defaultValue),$=Ke(e,"value"),V=qe($,S),D=R(""),U=t=>{const a=String(t).split(".")[1];return a?a.length:0},ae=t=>{const a=[e.min,e.max,e.step,t].map(s=>s===void 0?0:U(s));return Math.max(...a)},de=Z(()=>{const{placeholder:t}=e;return t!==void 0?t:v.value.placeholder}),K=Z(()=>{const t=Be(e.step);return t!==null?t===0?1:Math.abs(t):1}),le=Z(()=>{const t=Be(e.min);return t!==null?t:null}),W=Z(()=>{const t=Be(e.max);return t!==null?t:null}),w=t=>{const{value:a}=V;if(t===a){n();return}const{"onUpdate:value":s,onUpdateValue:g,onChange:P}=e,{nTriggerFormInput:A,nTriggerFormChange:se}=b;P&&H(P,t),g&&H(g,t),s&&H(s,t),S.value=t,A(),se()},l=({offset:t,doUpdateIfValid:a,fixPrecision:s,isInputing:g})=>{const{value:P}=D;if(g&&Pt(P))return!1;const A=(e.parse||Ot)(P);if(A===null)return a&&w(null),null;if(Ve(A)){const se=U(A),{precision:he}=e;if(he!==void 0&&he<se&&!s)return!1;let q=parseFloat((A+t).toFixed(he!=null?he:ae(A)));if(Ve(q)){const{value:_e}=W,{value:ke}=le;if(_e!==null&&q>_e){if(!a||g)return!1;q=_e}if(ke!==null&&q<ke){if(!a||g)return!1;q=ke}return e.validator&&!e.validator(q)?!1:(a&&w(q),q)}}return!1},n=()=>{const{value:t}=V;if(Ve(t)){const{format:a,precision:s}=e;a?D.value=a(t):t===null||s===void 0||U(t)>s?D.value=ze(t,void 0):D.value=ze(t,s)}else D.value=String(t)};n();const i=Z(()=>l({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),y=Z(()=>{const{value:t}=V;if(e.validator&&t===null)return!1;const{value:a}=K;return l({offset:-a,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),M=Z(()=>{const{value:t}=V;if(e.validator&&t===null)return!1;const{value:a}=K;return l({offset:+a,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function O(t){const{onFocus:a}=e,{nTriggerFormFocus:s}=b;a&&H(a,t),s()}function ie(t){var a,s;if(t.target===((a=T.value)===null||a===void 0?void 0:a.wrapperElRef))return;const g=l({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(g!==!1){const se=(s=T.value)===null||s===void 0?void 0:s.inputElRef;se&&(se.value=String(g||"")),V.value===g&&n()}else n();const{onBlur:P}=e,{nTriggerFormBlur:A}=b;P&&H(P,t),A(),bt(()=>{n()})}function ce(t){const{onClear:a}=e;a&&H(a,t)}function G(){const{value:t}=M;if(!t){J();return}const{value:a}=V;if(a===null)e.validator||w(oe());else{const{value:s}=K;l({offset:s,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function z(){const{value:t}=y;if(!t){X();return}const{value:a}=V;if(a===null)e.validator||w(oe());else{const{value:s}=K;l({offset:-s,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const N=O,fe=ie;function oe(){if(e.validator)return null;const{value:t}=le,{value:a}=W;return t!==null?Math.max(0,t):a!==null?Math.min(0,a):0}function F(t){ce(t),w(null)}function c(t){var a,s,g;!((a=h.value)===null||a===void 0)&&a.$el.contains(t.target)&&t.preventDefault(),!((s=I.value)===null||s===void 0)&&s.$el.contains(t.target)&&t.preventDefault(),(g=T.value)===null||g===void 0||g.activate()}let Q=null,Y=null,re=null;function X(){re&&(window.clearTimeout(re),re=null),Q&&(window.clearInterval(Q),Q=null)}function J(){ge&&(window.clearTimeout(ge),ge=null),Y&&(window.clearInterval(Y),Y=null)}function me(){X(),re=window.setTimeout(()=>{Q=window.setInterval(()=>{z()},Le)},Ae),$e("mouseup",document,X,{once:!0})}let ge=null;function We(){J(),ge=window.setTimeout(()=>{Y=window.setInterval(()=>{G()},Le)},Ae),$e("mouseup",document,J,{once:!0})}const Ge=()=>{Y||G()},Qe=()=>{Q||z()};function Ye(t){var a,s;if(t.key==="Enter"){if(t.target===((a=T.value)===null||a===void 0?void 0:a.wrapperElRef))return;l({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((s=T.value)===null||s===void 0||s.deactivate())}else if(t.key==="ArrowUp"){if(!M.value||e.keyboard.ArrowUp===!1)return;t.preventDefault(),l({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&G()}else if(t.key==="ArrowDown"){if(!y.value||e.keyboard.ArrowDown===!1)return;t.preventDefault(),l({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&z()}}function Xe(t){D.value=t,e.updateValueOnInput&&!e.format&&!e.parse&&e.precision===void 0&&l({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}mt(V,()=>{n()});const Je={focus:()=>{var t;return(t=T.value)===null||t===void 0?void 0:t.focus()},blur:()=>{var t;return(t=T.value)===null||t===void 0?void 0:t.blur()}},Ze=ht("InputNumber",u,p);return Object.assign(Object.assign({},Je),{rtlEnabled:Ze,inputInstRef:T,minusButtonInstRef:I,addButtonInstRef:h,mergedClsPrefix:p,mergedBordered:r,uncontrolledValue:S,mergedValue:V,mergedPlaceholder:de,displayedValueInvalid:i,mergedSize:C,mergedDisabled:_,displayedValue:D,addable:M,minusable:y,mergedStatus:k,handleFocus:N,handleBlur:fe,handleClear:F,handleMouseDown:c,handleAddClick:Ge,handleMinusClick:Qe,handleAddMousedown:We,handleMinusMousedown:me,handleKeyDown:Ye,handleUpdateDisplayedValue:Xe,mergedTheme:f,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:be(()=>{const{self:{iconColorDisabled:t}}=f.value,[a,s,g,P]=pt(t);return{textColorTextDisabled:`rgb(${a}, ${s}, ${g})`,opacityDisabled:`${P}`}})})},render(){const{mergedClsPrefix:e,$slots:r}=this,p=()=>o(De,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>Ne(r["minus-icon"],()=>[o(Fe,{clsPrefix:e},{default:()=>o(Bt,null)})])}),u=()=>o(De,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>Ne(r["add-icon"],()=>[o(Fe,{clsPrefix:e},{default:()=>o(St,null)})])});return o("div",{class:[`${e}-input-number`,this.rtlEnabled&&`${e}-input-number--rtl`]},o(Rt,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,internalLoadingBeforeSuffix:!0},{prefix:()=>{var f;return this.showButton&&this.buttonPlacement==="both"?[p(),j(r.prefix,v=>v?o("span",{class:`${e}-input-number-prefix`},v):null)]:(f=r.prefix)===null||f===void 0?void 0:f.call(r)},suffix:()=>{var f;return this.showButton?[j(r.suffix,v=>v?o("span",{class:`${e}-input-number-suffix`},v):null),this.buttonPlacement==="right"?p():null,u()]:(f=r.suffix)===null||f===void 0?void 0:f.call(r)}}))}}),Lt=ye("switch",`
 height: var(--n-height);
 min-width: var(--n-width);
 vertical-align: middle;
 user-select: none;
 -webkit-user-select: none;
 display: inline-flex;
 outline: none;
 justify-content: center;
 align-items: center;
`,[m("children-placeholder",`
 height: var(--n-rail-height);
 display: flex;
 flex-direction: column;
 overflow: hidden;
 pointer-events: none;
 visibility: hidden;
 `),m("rail-placeholder",`
 display: flex;
 flex-wrap: none;
 `),m("button-placeholder",`
 width: calc(1.75 * var(--n-rail-height));
 height: var(--n-rail-height);
 `),ye("base-loading",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 font-size: calc(var(--n-button-width) - 4px);
 color: var(--n-loading-color);
 transition: color .3s var(--n-bezier);
 `,[Me({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),m("checked, unchecked",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 box-sizing: border-box;
 position: absolute;
 white-space: nowrap;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 line-height: 1;
 `),m("checked",`
 right: 0;
 padding-right: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),m("unchecked",`
 left: 0;
 justify-content: flex-end;
 padding-left: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),we("&:focus",[m("rail",`
 box-shadow: var(--n-box-shadow-focus);
 `)]),L("round",[m("rail","border-radius: calc(var(--n-rail-height) / 2);",[m("button","border-radius: calc(var(--n-button-height) / 2);")])]),Oe("disabled",[Oe("icon",[L("rubber-band",[L("pressed",[m("rail",[m("button","max-width: var(--n-button-width-pressed);")])]),m("rail",[we("&:active",[m("button","max-width: var(--n-button-width-pressed);")])]),L("active",[L("pressed",[m("rail",[m("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])]),m("rail",[we("&:active",[m("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])])])])])]),L("active",[m("rail",[m("button","left: calc(100% - var(--n-button-width) - var(--n-offset))")])]),m("rail",`
 overflow: hidden;
 height: var(--n-rail-height);
 min-width: var(--n-rail-width);
 border-radius: var(--n-rail-border-radius);
 cursor: pointer;
 position: relative;
 transition:
 opacity .3s var(--n-bezier),
 background .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-rail-color);
 `,[m("button-icon",`
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 font-size: calc(var(--n-button-height) - 4px);
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 line-height: 1;
 `,[Me()]),m("button",`
 align-items: center; 
 top: var(--n-offset);
 left: var(--n-offset);
 height: var(--n-button-height);
 width: var(--n-button-width-pressed);
 max-width: var(--n-button-width);
 border-radius: var(--n-button-border-radius);
 background-color: var(--n-button-color);
 box-shadow: var(--n-button-box-shadow);
 box-sizing: border-box;
 cursor: inherit;
 content: "";
 position: absolute;
 transition:
 background-color .3s var(--n-bezier),
 left .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 max-width .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 `)]),L("active",[m("rail","background-color: var(--n-rail-color-active);")]),L("loading",[m("rail",`
 cursor: wait;
 `)]),L("disabled",[m("rail",`
 cursor: not-allowed;
 opacity: .5;
 `)])]),Et=Object.assign(Object.assign({},xe.props),{size:{type:String,default:"medium"},value:{type:[String,Number,Boolean],default:void 0},loading:Boolean,defaultValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},railStyle:Function,rubberBand:{type:Boolean,default:!0},onChange:[Function,Array]});let pe;const jt=Ie({name:"Switch",props:Et,setup(e){pe===void 0&&(typeof CSS!="undefined"?typeof CSS.supports!="undefined"?pe=CSS.supports("width","max(1px)"):pe=!1:pe=!0);const{mergedClsPrefixRef:r,inlineThemeDisabled:p}=je(e),u=xe("Switch","-switch",Lt,Mt,e,r),f=He(e),{mergedSizeRef:v,mergedDisabledRef:b}=f,C=R(e.defaultValue),_=Ke(e,"value"),k=qe(_,C),T=be(()=>k.value===e.checkedValue),I=R(!1),h=R(!1),S=be(()=>{const{railStyle:l}=e;if(l)return l({focused:h.value,checked:T.value})});function $(l){const{"onUpdate:value":n,onChange:i,onUpdateValue:y}=e,{nTriggerFormInput:M,nTriggerFormChange:O}=f;n&&H(n,l),y&&H(y,l),i&&H(i,l),C.value=l,M(),O()}function V(){const{nTriggerFormFocus:l}=f;l()}function D(){const{nTriggerFormBlur:l}=f;l()}function U(){e.loading||b.value||(k.value!==e.checkedValue?$(e.checkedValue):$(e.uncheckedValue))}function ae(){h.value=!0,V()}function de(){h.value=!1,D(),I.value=!1}function K(l){e.loading||b.value||l.key===" "&&(k.value!==e.checkedValue?$(e.checkedValue):$(e.uncheckedValue),I.value=!1)}function le(l){e.loading||b.value||l.key===" "&&(l.preventDefault(),I.value=!0)}const W=be(()=>{const{value:l}=v,{self:{opacityDisabled:n,railColor:i,railColorActive:y,buttonBoxShadow:M,buttonColor:O,boxShadowFocus:ie,loadingColor:ce,textColor:G,iconColor:z,[ee("buttonHeight",l)]:N,[ee("buttonWidth",l)]:fe,[ee("buttonWidthPressed",l)]:oe,[ee("railHeight",l)]:F,[ee("railWidth",l)]:c,[ee("railBorderRadius",l)]:Q,[ee("buttonBorderRadius",l)]:Y},common:{cubicBezierEaseInOut:re}}=u.value;let X,J,me;return pe?(X=`calc((${F} - ${N}) / 2)`,J=`max(${F}, ${N})`,me=`max(${c}, calc(${c} + ${N} - ${F}))`):(X=Te((E(F)-E(N))/2),J=Te(Math.max(E(F),E(N))),me=E(F)>E(N)?c:Te(E(c)+E(N)-E(F))),{"--n-bezier":re,"--n-button-border-radius":Y,"--n-button-box-shadow":M,"--n-button-color":O,"--n-button-width":fe,"--n-button-width-pressed":oe,"--n-button-height":N,"--n-height":J,"--n-offset":X,"--n-opacity-disabled":n,"--n-rail-border-radius":Q,"--n-rail-color":i,"--n-rail-color-active":y,"--n-rail-height":F,"--n-rail-width":c,"--n-width":me,"--n-box-shadow-focus":ie,"--n-loading-color":ce,"--n-text-color":G,"--n-icon-color":z}}),w=p?gt("switch",be(()=>v.value[0]),W,e):void 0;return{handleClick:U,handleBlur:de,handleFocus:ae,handleKeyup:K,handleKeydown:le,mergedRailStyle:S,pressed:I,mergedClsPrefix:r,mergedValue:k,checked:T,mergedDisabled:b,cssVars:p?void 0:W,themeClass:w==null?void 0:w.themeClass,onRender:w==null?void 0:w.onRender}},render(){const{mergedClsPrefix:e,mergedDisabled:r,checked:p,mergedRailStyle:u,onRender:f,$slots:v}=this;f==null||f();const{checked:b,unchecked:C,icon:_,"checked-icon":k,"unchecked-icon":T}=v,I=!(Ce(_)&&Ce(k)&&Ce(T));return o("div",{role:"switch","aria-checked":p,class:[`${e}-switch`,this.themeClass,I&&`${e}-switch--icon`,p&&`${e}-switch--active`,r&&`${e}-switch--disabled`,this.round&&`${e}-switch--round`,this.loading&&`${e}-switch--loading`,this.pressed&&`${e}-switch--pressed`,this.rubberBand&&`${e}-switch--rubber-band`],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},o("div",{class:`${e}-switch__rail`,"aria-hidden":"true",style:u},j(b,h=>j(C,S=>h||S?o("div",{"aria-hidden":!0,class:`${e}-switch__children-placeholder`},o("div",{class:`${e}-switch__rail-placeholder`},o("div",{class:`${e}-switch__button-placeholder`}),h),o("div",{class:`${e}-switch__rail-placeholder`},o("div",{class:`${e}-switch__button-placeholder`}),S)):null)),o("div",{class:`${e}-switch__button`},j(_,h=>j(k,S=>j(T,$=>o(vt,null,{default:()=>this.loading?o(wt,{key:"loading",clsPrefix:e,strokeWidth:20}):this.checked&&(S||h)?o("div",{class:`${e}-switch__button-icon`,key:S?"checked-icon":"icon"},S||h):!this.checked&&($||h)?o("div",{class:`${e}-switch__button-icon`,key:$?"unchecked-icon":"icon"},$||h):null})))),j(b,h=>h&&o("div",{key:"checked",class:`${e}-switch__checked`},h)),j(C,h=>h&&o("div",{key:"unchecked",class:`${e}-switch__unchecked`},h)))))}}),ne={pageCollectTask:(e={})=>te.post("/collectTask/pageCollectTask",e),addCollectTask:(e={})=>te.post("/collectTask/addCollectTask",e),startCollectTask:(e={})=>te.post("/collectTask/startCollectTask",e),pauseTask:(e={})=>te.post("/collectTask/pauseCollectTask",e),stopTask:(e={})=>te.post("/collectTask/stopCollectTask",e),listCollectTaskState:()=>te.post("/collectTask/listCollectTaskState"),listSimpleSc:()=>te.post("/sourceConfig/listSimpleSc")},dn=Object.assign({name:"Crud"},{__name:"index",setup(e){const r=R(null),p=R([]),u=R({});function f(){for(const n in u.value)u.value[n]=null}const v=R({}),b=R(!0);yt(()=>{var n;(n=r.value)==null||n.handleSearch(),_(),T()});const C=R([]);function _(){return ue(this,null,function*(){const n=yield ne.listSimpleSc();n==null||n.data.forEach(i=>{const y={label:i.sourceName,value:i.id};C.value.push(y)})})}const k=R([]);function T(){return ue(this,null,function*(){const n=yield ne.listCollectTaskState();n==null||n.data.forEach(i=>{const y={label:i.description,value:i.value};k.value.push(y)})})}function I(){let n=u.value;const i={};n.startTimeRange&&n.startTimeRange.length?(i.startTime=n.startTimeRange[0],i.endTime=n.startTimeRange[1],n.startTime=i):delete n.startTime;const y={};n.endTimeRange&&n.endTimeRange.length?(y.startTime=n.endTimeRange[0],y.endTime=n.endTimeRange[1],n.endTime=y):delete n.endTime}function h(n){return ue(this,null,function*(){yield ne.startCollectTask(n),$message.success("已开始~")})}function S(n){return ue(this,null,function*(){yield ne.pauseTask(n),$message.success("已暂停~")})}function $(n){return ue(this,null,function*(){yield ne.stopTask(n),$message.success("已停止~")})}const V=[{title:"采集id",key:"id",width:80,ellipsis:{tooltip:!0}},{title:"采集源名称",key:"sourceName",width:150,ellipsis:{tooltip:!0}},{title:"采集时间段",key:"duration",width:150},{title:"创建时间",key:"createTime",width:180,render(n){return o("span",n.createTime)}},{title:"开始时间",key:"startTime",width:180,render(n){return o("span",n.startTime)}},{title:"暂停时间",key:"pauseTime",width:180,render(n){return o("span",n.pauseTime)}},{title:"停止时间",key:"stopTime",width:180,render(n){return o("span",n.stopTime)}},{title:"完成时间",key:"finishTime",width:180,render(n){return o("span",n.finishTime)}},{title:"采集进度",key:"process",width:80},{title:"任务状态",key:"state.description",width:80},{title:"操作",key:"actions",width:280,align:"center",fixed:"right",hideInExcel:!0,render(n){return[o(ve,{size:"small",type:"primary",onClick:()=>{h({id:n.id})}},{default:()=>"开始",icon:Se("material-symbols:edit-outline",{size:14})}),o(ve,{size:"small",type:"primary",style:"margin-left: 15px;",onClick:()=>{S({id:n.id})}},{default:()=>"暂停",icon:Se("material-symbols:edit-outline",{size:14})}),o(ve,{size:"small",type:"error",style:"margin-left: 15px;",onClick:()=>{$({id:n.id})}},{default:()=>"停止",icon:Se("material-symbols:edit-outline",{size:14})})]}}];function D(n){n.length&&$message.info(`选中${n.join(" ")}`)}const{modalVisible:U,modalAction:ae,modalTitle:de,modalLoading:K,handleAdd:le,handleSave:W,modalForm:w,modalFormRef:l}=at({name:"采集任务",initForm:{},doCreate:ne.addCollectTask,doDelete:null,doUpdate:null,doSearch:null,refresh:()=>{var n;return(n=r.value)==null?void 0:n.handleSearch()}});return(n,i)=>{const y=rt,M=Vt,O=tt,ie=Tt,ce=nt,G=jt,z=lt,N=At,fe=it,oe=ot,F=et;return Pe(),Ue(F,{"show-footer":"",title:"采集管理"},{action:B(()=>[xt("div",null,[x(d(ve),{type:"primary",class:"ml-16",onClick:d(le)},{default:B(()=>[x(y,{icon:"material-symbols:add",size:18,class:"mr-5"}),_t(" 新增任务 ")]),_:1},8,["onClick"])])]),default:B(()=>[x(ce,{ref_key:"$table",ref:r,"query-items":d(u),"onUpdate:queryItems":i[4]||(i[4]=c=>Re(u)?u.value=c:null),"extra-params":d(v),"scroll-x":1200,columns:V,"get-data":d(ne).pageCollectTask,onOnChecked:D,onOnDataChange:i[5]||(i[5]=c=>p.value=c),onResetQueryItems:f},{queryBar:B(()=>[x(O,{label:"采集源","label-width":50},{default:B(()=>[x(M,{value:d(u).sourceId,"onUpdate:value":i[0]||(i[0]=c=>d(u).sourceId=c),placeholder:"请选择采集源",clearable:"",options:d(C)},null,8,["value","options"])]),_:1}),x(O,{label:"任务状态","label-width":60,"content-width":150},{default:B(()=>[x(M,{value:d(u).state,"onUpdate:value":i[1]||(i[1]=c=>d(u).state=c),placeholder:"请选择任务状态",clearable:"",options:d(k)},null,8,["value","options"])]),_:1}),x(O,{label:"创建时间","label-width":65,"content-width":300},{default:B(()=>[x(ie,{"formatted-value":d(u).startTimeRange,"onUpdate:formattedValue":[i[2]||(i[2]=c=>d(u).startTimeRange=c),I],type:"datetimerange",placeholder:"请选择范围",clearable:""},null,8,["formatted-value"])]),_:1}),x(O,{label:"结束时间","label-width":65,"content-width":300},{default:B(()=>[x(ie,{"formatted-value":d(u).endTimeRange,"onUpdate:formattedValue":[i[3]||(i[3]=c=>d(u).endTimeRange=c),I],type:"datetimerange",placeholder:"请选择范围",clearable:""},null,8,["formatted-value"])]),_:1})]),_:1},8,["query-items","extra-params","get-data"]),x(oe,{visible:d(U),"onUpdate:visible":i[9]||(i[9]=c=>Re(U)?U.value=c:null),title:d(de),loading:d(K),"show-footer":d(ae)!=="view",onOnSave:d(W)},{default:B(()=>[x(fe,{ref_key:"modalFormRef",ref:l,model:d(w),"label-placement":"left","label-align":"left","label-width":80,disabled:d(ae)==="view"},{default:B(()=>[x(z,{label:"是否采集全部","label-width":120},{default:B(()=>[x(G,{value:d(b),"onUpdate:value":i[6]||(i[6]=c=>Re(b)?b.value=c:null)},null,8,["value"])]),_:1}),d(b)?kt("",!0):(Pe(),Ue(z,{key:0,label:"采集时间段",path:"duration","label-width":110,rule:{required:!0,message:"请输入采集时间段",trigger:"blur",type:"number"}},{default:B(()=>[x(N,{value:d(w).duration,"onUpdate:value":i[7]||(i[7]=c=>d(w).duration=c),min:1,placeholder:"采集过去xx天数据",clearable:"","w-full":"","button-placement":"both"},null,8,["value"])]),_:1})),x(z,{label:"采集源",path:"sourceIds",rule:{required:!0,message:"请选择采集源",trigger:"blur",type:"array"}},{default:B(()=>[x(M,{value:d(w).sourceIds,"onUpdate:value":i[8]||(i[8]=c=>d(w).sourceIds=c),placeholder:"请选择采集源",clearable:"",options:d(C),multiple:""},null,8,["value","options"])]),_:1})]),_:1},8,["model","disabled"])]),_:1},8,["visible","title","loading","show-footer","onOnSave"])]),_:1})}}});export{dn as default};
