import{_ as Q,a as j}from"./CrudTable-d5dbb5b5.js";import{u as J,_ as L,a as M,b as Z}from"./useCRUD-bc17d7e5.js";import{a as G}from"./TheIcon-eb82caa9.js";import{s as u,q as g,Z as H,o as C,j as x,w as a,n as z,k as l,m as w,l as e,_ as m,aJ as q,aP as W,h}from"./index-967a368f.js";import{a as b}from"./icon-8918c9e9.js";import{_ as X}from"./Checkbox-55f9ae12.js";import"./AppPage-2347a5b8.js";import"./_plugin-vue_export-helper-b1890646.js";import"./Space-9d5a9065.js";import"./Tag-2664c78d.js";import"./create-0094aa60.js";import"./use-compitable-f97a7f2f.js";import"./Suffix-5fa70e3c.js";import"./Empty-f250f8a4.js";import"./Select-589412ca.js";const p={listRole:()=>u.post("/role/listRole"),addRole:(s={})=>u.post("/role/addRole",s),updateRole:(s={})=>u.post("/role/updateRole",s),deleteRole:(s={})=>u.post("/role/deleteRole",s)},Y=z("div",null,null,-1),_e={__name:"index",setup(s){const c=g(null);H(()=>{c.value.handleSearch()});const r=g({});function N(){for(const t in r.value)r.value[t]=null}const d=g([]);function I(t){t.length?d.value=[...t]:d.value=[]}function U(){d.value.length?(k({ids:d.value}),d.value=[]):$message.error("未选中任何数据")}const $=[{type:"selection",fixed:"left"},{title:"角色名称",key:"roleName",width:240},{title:"角色编码",key:"code",width:240},{title:"操作",key:"actions",width:200,align:"center",fixed:"right",hideInExcel:!0,render(t){return[h(m,{size:"small",type:"primary",onClick:()=>{B(t,!1)}},{default:()=>"编辑",icon:b("material-symbols:edit-outline",{size:14})}),h(m,{size:"small",type:"primary",style:"margin-left: 15px;",onClick:()=>{}},{default:()=>"编辑权限",icon:b("ic:baseline-vpn-key",{size:14})}),h(m,{size:"small",type:"error",style:"margin-left: 15px;",onClick:()=>{k({ids:[t.id]})}},{default:()=>"删除",icon:b("material-symbols:delete-outline",{size:14})})]}}],{modalVisible:_,modalTitle:S,modalLoading:D,modalAction:f,handleAdd:V,handleDelete:k,handleEdit:B,handleSave:F,modalForm:i,modalFormRef:T}=J({name:"角色",initForm:{},doCreate:p.addRole,doDelete:p.deleteRole,doUpdate:p.updateRole,doSearch:null,refresh:()=>{var t;return(t=c.value)==null?void 0:t.handleSearch()}});return(t,o)=>{const R=G,O=j,v=X,y=L,A=M,E=Z,P=Q;return C(),x(P,{"show-footer":"",title:"角色管理"},{action:a(()=>[z("div",null,[l(e(m),{type:"primary",onClick:e(V)},{default:a(()=>[l(R,{icon:"material-symbols:add",size:18,class:"mr-5"}),w(" 新建角色 ")]),_:1},8,["onClick"]),l(e(m),{type:"error",class:"ml-16",onClick:U},{default:a(()=>[l(R,{icon:"material-symbols:delete-outline",size:18,class:"mr-5"}),w(" 批量删除 ")]),_:1})])]),default:a(()=>[l(O,{ref_key:"$table",ref:c,"query-items":e(r),"onUpdate:queryItems":o[0]||(o[0]=n=>q(r)?r.value=n:null),"row-key":"id","scroll-x":1200,columns:$,"is-pagination":!1,"get-data":e(p).listRole,onOnChecked:I,onResetQueryItems:N},{queryBar:a(()=>[Y]),_:1},8,["query-items","get-data"]),l(E,{visible:e(_),"onUpdate:visible":o[4]||(o[4]=n=>q(_)?_.value=n:null),title:e(S),loading:e(D),"show-footer":e(f)!=="view",onOnSave:e(F)},{default:a(()=>[l(A,{ref_key:"modalFormRef",ref:T,model:e(i),"label-placement":"left","label-align":"left","label-width":80,disabled:e(f)==="view"},{default:a(()=>[l(y,{labe:"角色id",path:"id"},{default:a(()=>[l(v,{value:e(i).id,"onUpdate:value":o[1]||(o[1]=n=>e(i).id=n),disabled:""},null,8,["value"])]),_:1}),l(y,{label:"角色名称",path:"roleName",rule:{required:!0,message:"请输入角色名称",trigger:"blur"}},{default:a(()=>[l(v,{value:e(i).roleName,"onUpdate:value":o[2]||(o[2]=n=>e(i).roleName=n),maxlength:"15",placeholder:"请输入角色名称"},null,8,["value"])]),_:1}),e(f)==="add"?(C(),x(y,{key:0,label:"角色编码",path:"code",rule:{required:!0,message:"请输入角色编码",trigger:"blur"}},{default:a(()=>[l(v,{value:e(i).code,"onUpdate:value":o[3]||(o[3]=n=>e(i).code=n),maxlength:"10",placeholder:"请输入角色编码"},null,8,["value"])]),_:1})):W("",!0)]),_:1},8,["model","disabled"])]),_:1},8,["visible","title","loading","show-footer","onOnSave"])]),_:1})}}};export{_e as default};
